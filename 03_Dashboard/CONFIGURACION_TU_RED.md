# üåê Configuraci√≥n Espec√≠fica - Tu Red

## üìä Resumen de Tu Configuraci√≥n

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    TU RED CONFIGURADA                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Servidor 1 (M√≥dulo 1)         Tu Computadora               Servidor 3 (M√≥dulo 3)
172.26.163.247                172.31.5.36                  172.26.167.211

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  BASE DE DATOS   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    DASHBOARD     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ DATA WAREHOUSE   ‚îÇ
‚îÇ     ORIGEN       ‚îÇ  MySQL   ‚îÇ                  ‚îÇ  MySQL  ‚îÇ                  ‚îÇ
‚îÇ                  ‚îÇ  :3306   ‚îÇ  Backend :5001   ‚îÇ  :3306  ‚îÇ                  ‚îÇ
‚îÇgestionproyectos_ ‚îÇ          ‚îÇ  Frontend :8080  ‚îÇ         ‚îÇ dw_proyectos_    ‚îÇ
‚îÇ      hist        ‚îÇ          ‚îÇ                  ‚îÇ         ‚îÇ      hist        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚úÖ Archivos YA CONFIGURADOS

### ‚úÖ 1. Archivo `.env` - CREADO
**Ubicaci√≥n:** `03_Dashboard/.env`

```bash
# Conexiones configuradas:
DB_ORIGEN_HOST=172.26.163.247      ‚úÖ M√≥dulo 1
DB_DW_HOST=172.26.167.211          ‚úÖ M√≥dulo 3
API_BASE_URL=http://172.31.5.36:5001  ‚úÖ Tu Dashboard
```

### ‚úÖ 2. Archivo `app.js` - ACTUALIZADO
**Ubicaci√≥n:** `03_Dashboard/frontend/app.js`

```javascript
const API_BASE = 'http://172.31.5.36:5001';  ‚úÖ
const API_URL = 'http://172.31.5.36:5001/api';  ‚úÖ
```

---

## üîê LO QUE NECESITAS HACER EN LOS SERVIDORES

### üìç Servidor 1 (172.26.163.247) - M√≥dulo 1

**1. Crear usuario con acceso remoto:**

```bash
# Conectar a MySQL
mysql -u root -p

# Ejecutar estos comandos:
CREATE USER 'etl_user'@'%' IDENTIFIED BY 'etl_password_123';
GRANT SELECT ON gestionproyectos_hist.* TO 'etl_user'@'%';
FLUSH PRIVILEGES;
EXIT;
```

**2. Configurar MySQL para aceptar conexiones remotas:**

```bash
# Editar configuraci√≥n
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf

# Buscar y cambiar:
bind-address = 127.0.0.1
# POR:
bind-address = 0.0.0.0

# Guardar (Ctrl+O, Enter, Ctrl+X)

# Reiniciar MySQL
sudo systemctl restart mysql
```

**3. Abrir puerto en firewall:**

```bash
# Ubuntu/Debian
sudo ufw allow from 172.31.5.36 to any port 3306
sudo ufw status

# O permitir a todos (menos seguro):
sudo ufw allow 3306/tcp
```

**4. Verificar que el servicio est√© escuchando:**

```bash
sudo netstat -tulpn | grep 3306
# Debe mostrar: 0.0.0.0:3306
```

---

### üìç Servidor 3 (172.26.167.211) - M√≥dulo 3

**1. Crear usuario con acceso remoto:**

```bash
# Conectar a MySQL
mysql -u root -p

# Ejecutar estos comandos:
CREATE USER 'etl_user'@'%' IDENTIFIED BY 'etl_password_123';
GRANT SELECT ON dw_proyectos_hist.* TO 'etl_user'@'%';
FLUSH PRIVILEGES;
EXIT;
```

**2. Configurar MySQL para aceptar conexiones remotas:**

```bash
# Editar configuraci√≥n
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf

# Buscar y cambiar:
bind-address = 127.0.0.1
# POR:
bind-address = 0.0.0.0

# Guardar (Ctrl+O, Enter, Ctrl+X)

# Reiniciar MySQL
sudo systemctl restart mysql
```

**3. Abrir puerto en firewall:**

```bash
# Ubuntu/Debian
sudo ufw allow from 172.31.5.36 to any port 3306
sudo ufw status

# O permitir a todos (menos seguro):
sudo ufw allow 3306/tcp
```

**4. Verificar que el servicio est√© escuchando:**

```bash
sudo netstat -tulpn | grep 3306
# Debe mostrar: 0.0.0.0:3306
```

---

## üß™ PROBAR CONEXIONES DESDE TU COMPUTADORA

### Probar Servidor 1 (M√≥dulo 1):

```bash
# Prueba 1: Ping
ping -c 3 172.26.163.247

# Prueba 2: Puerto MySQL
telnet 172.26.163.247 3306
# O con nc:
nc -zv 172.26.163.247 3306

# Prueba 3: Conexi√≥n MySQL
mysql -h 172.26.163.247 -u etl_user -p gestionproyectos_hist
# Password: etl_password_123
```

### Probar Servidor 3 (M√≥dulo 3):

```bash
# Prueba 1: Ping
ping -c 3 172.26.167.211

# Prueba 2: Puerto MySQL
telnet 172.26.167.211 3306
# O con nc:
nc -zv 172.26.167.211 3306

# Prueba 3: Conexi√≥n MySQL
mysql -h 172.26.167.211 -u etl_user -p dw_proyectos_hist
# Password: etl_password_123
```

**‚úÖ Si ambas pruebas funcionan, est√°s listo!**

---

## üöÄ INICIAR EL DASHBOARD

```bash
cd 03_Dashboard

# Verificar que .env existe
ls -la .env

# Iniciar dashboard
./iniciar_dashboard.sh
```

**El script va a:**
1. ‚úÖ Verificar puertos disponibles
2. ‚úÖ Iniciar backend Flask en :5001
3. ‚úÖ Iniciar frontend en :8080
4. ‚úÖ Abrir navegador autom√°ticamente

---

## üåê ACCEDER AL DASHBOARD

### Desde tu computadora:
```
http://localhost:8080/index.html
http://172.31.5.36:8080/index.html
```

### Desde otra computadora en tu red:
```
http://172.31.5.36:8080/index.html
```

---

## üìã CHECKLIST ANTES DE INICIAR

### En Servidor 1 (172.26.163.247):
- [ ] Usuario `etl_user@'%'` creado
- [ ] Permisos SELECT otorgados
- [ ] `bind-address = 0.0.0.0` configurado
- [ ] MySQL reiniciado
- [ ] Puerto 3306 abierto en firewall
- [ ] Probada conexi√≥n desde tu PC

### En Servidor 3 (172.26.167.211):
- [ ] Usuario `etl_user@'%'` creado
- [ ] Permisos SELECT otorgados
- [ ] `bind-address = 0.0.0.0` configurado
- [ ] MySQL reiniciado
- [ ] Puerto 3306 abierto en firewall
- [ ] Probada conexi√≥n desde tu PC

### En Tu Computadora (172.31.5.36):
- [x] Archivo `.env` creado ‚úÖ
- [x] Archivo `app.js` actualizado ‚úÖ
- [ ] Conexiones probadas con `mysql` o `telnet`
- [ ] Dashboard iniciado con `./iniciar_dashboard.sh`

---

## üêõ SOLUCI√ìN DE PROBLEMAS

### ‚ùå Error: "Connection refused" al probar MySQL

**Causa:** Firewall bloqueando o MySQL no escuchando en todas las interfaces.

**Soluci√≥n:**
```bash
# En el servidor con problemas:

# 1. Verificar que MySQL escucha en 0.0.0.0
sudo netstat -tulpn | grep 3306
# Debe mostrar: 0.0.0.0:3306 (NO 127.0.0.1:3306)

# 2. Si muestra 127.0.0.1, editar config:
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
# Cambiar bind-address = 0.0.0.0
sudo systemctl restart mysql

# 3. Verificar firewall
sudo ufw status
sudo ufw allow 3306/tcp
```

### ‚ùå Error: "Access denied for user"

**Causa:** Usuario no existe con permisos remotos o password incorrecto.

**Soluci√≥n:**
```sql
-- En el servidor:
mysql -u root -p

-- Verificar usuarios
SELECT User, Host FROM mysql.user WHERE User = 'etl_user';

-- Debe mostrar Host = '%', si no:
DROP USER IF EXISTS 'etl_user'@'localhost';
CREATE USER 'etl_user'@'%' IDENTIFIED BY 'etl_password_123';
GRANT SELECT ON *.* TO 'etl_user'@'%';
FLUSH PRIVILEGES;
```

### ‚ùå Dashboard se inicia pero no carga datos

**Causa:** Backend no puede conectarse a los servidores.

**Soluci√≥n:**
```bash
# Ver logs del backend
tail -f 03_Dashboard/logs/backend.log

# Buscar errores de conexi√≥n
# Si hay errores, verificar .env y conexiones MySQL
```

### ‚ùå "CORS policy" error en navegador

**Causa:** CORS mal configurado.

**Soluci√≥n:**
```bash
# Verificar .env
cat 03_Dashboard/.env | grep CORS

# Debe incluir tu IP:
# CORS_ORIGINS=http://172.31.5.36:8080,...

# Si no, editar y reiniciar:
nano 03_Dashboard/.env
./03_Dashboard/detener_dashboard.sh
./03_Dashboard/iniciar_dashboard.sh
```

---

## üìû SCRIPT DE DIAGN√ìSTICO R√ÅPIDO

Guarda esto como `test_conexiones.sh` y ejec√∫talo:

```bash
#!/bin/bash

echo "üîç Probando conexiones..."
echo ""

echo "üìç Servidor 1 (BD Origen):"
nc -zv 172.26.163.247 3306 2>&1
echo ""

echo "üìç Servidor 3 (Data Warehouse):"
nc -zv 172.26.167.211 3306 2>&1
echo ""

echo "üìç Intentando conexi√≥n MySQL a Servidor 1:"
mysql -h 172.26.163.247 -u etl_user -petl_password_123 -e "SHOW DATABASES;" 2>&1 | head -5
echo ""

echo "üìç Intentando conexi√≥n MySQL a Servidor 3:"
mysql -h 172.26.167.211 -u etl_user -petl_password_123 -e "SHOW DATABASES;" 2>&1 | head -5
echo ""

echo "‚úÖ Si ambas conexiones funcionan, est√°s listo para iniciar el dashboard!"
```

```bash
chmod +x test_conexiones.sh
./test_conexiones.sh
```

---

## üéØ RESUMEN DE COMANDOS CLAVE

### Para ejecutar en CADA servidor (1 y 3):

```bash
# 1. Crear usuario
mysql -u root -p -e "CREATE USER 'etl_user'@'%' IDENTIFIED BY 'etl_password_123'; GRANT SELECT ON *.* TO 'etl_user'@'%'; FLUSH PRIVILEGES;"

# 2. Configurar MySQL
sudo sed -i 's/bind-address.*/bind-address = 0.0.0.0/' /etc/mysql/mysql.conf.d/mysqld.cnf
sudo systemctl restart mysql

# 3. Abrir firewall
sudo ufw allow 3306/tcp
```

### Para ejecutar en TU computadora:

```bash
# 1. Probar conexiones
mysql -h 172.26.163.247 -u etl_user -p gestionproyectos_hist
mysql -h 172.26.167.211 -u etl_user -p dw_proyectos_hist

# 2. Iniciar dashboard
cd 03_Dashboard
./iniciar_dashboard.sh

# 3. Acceder
# http://172.31.5.36:8080/index.html
```

---

## ‚ú® TODO EST√Å CONFIGURADO

**Archivos modificados:**
- ‚úÖ `03_Dashboard/.env` - Creado con tus IPs
- ‚úÖ `03_Dashboard/frontend/app.js` - Actualizado con tu IP

**Solo necesitas:**
1. Configurar usuarios en Servidores 1 y 3
2. Abrir puertos en firewalls
3. Iniciar el dashboard

---

**¬øListo?** Ejecuta los comandos en los servidores y luego inicia el dashboard! üöÄ

[Volver a INSTALACION.md](INSTALACION.md)
